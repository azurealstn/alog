# alog ì†Œê°œ - ì‚¬ì´ë“œ í”„ë¡œì íŠ¸

ì‹¤ì œ ì„œë¹„ìŠ¤í•˜ëŠ” ì‚¬ì´íŠ¸ëŠ” ì—¬ëŸ¬ ì‚¬ëŒë“¤ì´ ë³´ê¸° ë•Œë¬¸ì— ì‹ ê²½ì¨ì„œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ì— ë¹„í•´ ì €ì˜ ì´ì „ì˜ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ëŠ” ì €ë§Œ ë³´ë©´ ëê¸° ë•Œë¬¸ì— ëŒ€ì¶©(?) ë§Œë“  ê²ƒì´ í‹°ê°€ ë‚¬ìŠµë‹ˆë‹¤.  
ì´ë²ˆì—ëŠ” ì €ë„ ê·¸ëŸ¬í•œ ì‚¬ì´íŠ¸ë¥¼ ë§Œë“¤ê³  ì‹¶ì—ˆê³ , ì‹¤ì œ ì„œë¹„ìŠ¤í•˜ëŠ” ì‚¬ì´íŠ¸ í•˜ë‚˜ë¥¼ ê²°ì •í•´ì„œ ë˜‘ê°™ì´ ë§Œë“¤ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. (~~ì ˆëŒ€ ì•„ì´ë””ì–´ê°€ ì—†ì–´ì„œê°€ ì•„ë‹™ë‹ˆë‹¤..~~)

velog(ë²¨ë¡œê·¸)ëŠ” velopertë‹˜ì´ ë§Œë“  ê°œë°œìë¥¼ ìœ„í•œ ë¸”ë¡œê·¸ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.  
ì‹¤ì œë¡œ velogë¥¼ ìì£¼ ë³´ëŠ” ì´ìœ ëŠ” velogì— ì˜¬ë¼ì˜¤ëŠ” ê¸€ë“¤ì˜ í€„ë¦¬í‹°ê°€ ë„ˆë¬´ ê´œì°®ê³  ë³´ë‹¤ë³´ë©´ ì–»ì–´ê°€ëŠ” ê²ƒì´ ë” ë§ê¸° ë•Œë¬¸ì— ì£¼ë¡œ ëˆˆíŒ…(?)ì„ ë§ì´ í–ˆìŠµë‹ˆë‹¤.

ê·¸ë˜ì„œ í‰ì†Œ ì¦ê²¨ë³´ëŠ” velog ì§í‰(í´ë¡  ì½”ë”©)ì„ ë§Œë“¤ì–´ë³´ë©´ ì¢‹ê² ë‹¤ ìƒê°í–ˆìŠµë‹ˆë‹¤. 

> í”„ë¡œì íŠ¸ ì´ë¦„ì¸ alog ì—ì„œ a ëŠ” Azure(í‘¸ë¥¸ í•˜ëŠ˜)ë¥¼ ëœ»í•©ë‹ˆë‹¤.

## ğŸ•’ í”„ë¡œì íŠ¸ ê°œë°œ ê¸°ê°„

- ê°œì¸ í”„ë¡œì íŠ¸
- í”„ë¡œì íŠ¸ ê¸°ê°„: 2022-10-08 ~ 2022-12-08 (ë‘ ë‹¬ê°„ ì§„í–‰)

## ğŸ¨ ê¸°ìˆ ìŠ¤íƒ

- Java 11
- Intellij Community, VS Code
- Spring 5.x MVC
- Spring Boot 2.7.x
- Spring Security
- Spring Data JPA
- QueryDSL 5.0.0
- H2 Database 2.1.214
- MariaDB 10.6
- Gradle 7.5
- Mustache
- Git
- Junit 5
  - MockMvc
- AWS
  - EC2
  - RDS
  - S3

## ğŸ» API

- http://azurelog.link/docs/member.html
- http://azurelog.link/docs/posts.html
- http://azurelog.link/docs/tempsave.html
- http://azurelog.link/docs/comment.html
- http://azurelog.link/docs/hashtag.html
- http://azurelog.link/docs/postsLike.html

## ğŸ€ ê¸°ëŠ¥ êµ¬í˜„

- ë¡œê·¸ì¸/íšŒì›ê°€ì…
  - ì´ë©”ì¼ ì¸ì¦ì„ í†µí•œ ë¡œê·¸ì¸/íšŒì›ê°€ì…
  - OAuth2 Clientë¥¼ ì´ìš©í•œ ì†Œì…œë¡œê·¸ì¸
    - Google, Naver, Kakao
- íšŒì› ê´€ë¦¬ (ìˆ˜ì •, ì‚­ì œ)
  - íšŒì› ì¸ë„¤ì¼ (ì¶”ê°€, ì‚­ì œ)
- ê²Œì‹œíŒ CMS ê¸°ëŠ¥
  - ê²Œì‹œê¸€ ê´€ë¦¬ (ì¶”ê°€,ì¡°íšŒ,ìˆ˜ì •,ì‚­ì œ)
  - ëŒ“ê¸€ ê´€ë¦¬ (ì¶”ê°€,ì¡°íšŒ,ìˆ˜ì •,ì‚­ì œ)
  - ê²Œì‹œê¸€ ì¸ë„¤ì¼ ê´€ë¦¬ (ì¶”ê°€,ì‚­ì œ,ì¡°íšŒ)
- ê¸°ë³¸ ê²Œì‹œíŒ ê¸°ëŠ¥
  - ë“±ë¡, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ ë° ê¶Œí•œ ì²˜ë¦¬ (ë‚´ê°€ ì“´ ê¸€ë§Œ ìˆ˜ì •, ì‚­ì œ ê°€ëŠ¥)
  - í¬ìŠ¤íŠ¸ ì§§ì€ ì†Œê°œ (150ì ì œí•œ)
  - ì´ë¯¸ì§€(jpg, jpeg, jpe, png) ì—…ë¡œë“œ ê¸°ëŠ¥
  - ì„ì‹œ ì €ì¥ ê¸°ëŠ¥
  - ì¢‹ì•„ìš”
  - íƒœê·¸
  - ê³„ì¸µí˜• ëŒ“ê¸€ ê¸°ëŠ¥ (ëŒ€ëŒ“ê¸€)
  - ê²€ìƒ‰, ì •ë ¬ ê¸°ëŠ¥ (ë¬´í•œìŠ¤í¬ë¡¤ ì‚¬ìš©)
  - í˜ì´ì§•
  - `toast ui editor` ì‚¬ìš©

## ğŸš€ í”„ë¡œì íŠ¸ êµ¬ì¡°

![alog_structure](https://user-images.githubusercontent.com/55525868/205878592-62bf750e-0d8e-4e1e-bf9c-b01596a6a7a5.png)

- í”„ë¡ íŠ¸
  - html, css, js (es6+)
  - jquery, ajax
- ë°±
  - Spring Securityë¡œ ì‚¬ìš©ì ì¸ì¦
    - ë¡œê·¸ì¸ í¼, ë¹„ë°€ë²ˆí˜¸ì—†ì´ ê°•ì œ ì¸ì¦
  - JPAë¥¼ ì´ìš©í•œ ê°ì²´ì§€í–¥ì  í…Œì´ë¸” ê´€ë¦¬ (ORM)
  - DTOë¥¼ í†µí•œ ë„ë©”ì¸ ìˆœìˆ˜ì„± ë³´ì¥

## ğŸ« ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### ìš”êµ¬ì‚¬í•­

- ì‚¬ìš©ìëŠ” ì†Œì…œ ë¡œê·¸ì¸, ì´ë©”ì¼ ë¡œê·¸ì¸ì„ í•  ìˆ˜ ìˆë‹¤.
- ë¡œê·¸ì¸í•œ ì‚¬ìš©ìëŠ” ê²Œì‹œê¸€, ëŒ“ê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.
- ë¡œê·¸ì¸í•œ ì‚¬ìš©ìëŠ” ëŒ“ê¸€ì— ëŒ“ê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.
- ë¡œê·¸ì¸í•œ ì‚¬ìš©ìëŠ” íšŒì›ê³¼ ê²Œì‹œê¸€ì— ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  ìˆ˜ ìˆë‹¤.
- ë¡œê·¸ì¸í•œ ì‚¬ìš©ìëŠ” ê²Œì‹œê¸€ì„ ì‘ì„±í•˜ë‹¤ `ì„ì‹œì €ì¥`ì„ í•  ìˆ˜ ìˆë‹¤.
  - ì„ì‹œì €ì¥ì€ 10ì´ˆë§ˆë‹¤ ìë™ìœ¼ë¡œ ì €ì¥ë  ìˆ˜ ìˆë‹¤.
  - ê¸€ ì‘ì„±ì„ ì™„ë£Œí•˜ê±°ë‚˜ ì„ì‹œì €ì¥í•œ ê¸€ì„ ìˆ˜ì •í•´ì„œ ê¸€ ì‘ì„±ì´ ì™„ë£Œë˜ë©´ í•´ë‹¹ ì„ì‹œì €ì¥ì€ ì‚¬ë¼ì§„ë‹¤.
  - ì„ì‹œì €ì¥ì€ ì œëª©ê³¼ ë‚´ìš©ë§Œ ì €ì¥ì´ ëœë‹¤.
- ë¡œê·¸ì¸í•œ ì‚¬ìš©ìëŠ” ê²Œì‹œê¸€ì— ì¢‹ì•„ìš”ì™€ íƒœê·¸ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.
  - íƒœê·¸ ì €ì¥ì‹œ `#`ì€ ëª¨ë‘ ì œê±°ë˜ê³  DBì— ì €ì¥ëœë‹¤.
- íƒœê·¸ë¥¼ í´ë¦­í•˜ë©´ íƒœê·¸ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- ë©”ì¸ í™”ë©´ì—ëŠ” ìµœì‹ ìˆœê³¼ ì¢‹ì•„ìš”ìˆœìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë„ë¡ ì •ë ¬ ê¸°ëŠ¥ì„ ì¶”ê°€í•œë‹¤.
- ê²€ìƒ‰ í˜ì´ì§•ì€ ë¬´í•œìŠ¤í¬ë¡¤ì„ ì‚¬ìš©í•œë‹¤.

![erd2](https://user-images.githubusercontent.com/55525868/212695935-1f065110-807f-40eb-b173-12583e140708.PNG)

## ğŸŒŠ íŒ¨í‚¤ì§€ êµ¬ì¡° (ê³„ì¸µí˜• êµ¬ì¡°)

- ê³„ì¸µí˜• êµ¬ì¡°: ê° ê³„ì¸µì„ ëŒ€í‘œí•˜ëŠ” ë””ë ‰í„°ë¦¬ë¥¼ ê¸°ì¤€ìœ¼ë¡œ êµ¬ì„±
  - ì¥ì : ì „ì²´ì ì¸ êµ¬ì¡°ë¥¼ ë¹ ë¥´ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë‹¤. (í”„ë¡œì íŠ¸ê°€ ì‘ì€ ê²½ìš°ì— ì‚¬ìš©í•˜ë©´ ì¢‹ìŒ)
  - ëŒ€ì‹  í•œ íŒ¨í‚¤ì§€ ì•ˆì— ë‹¤ì–‘í•œ ë„ë©”ì¸ì´ ì„ì—¬ ìˆì–´ ì‘ì§‘ë„ê°€ ë‚®ë‹¤.
- ë„ë©”ì¸í˜• êµ¬ì¡°: ê° ë„ë©”ì¸ì„ ëŒ€í‘œí•˜ëŠ” ë””ë ‰í„°ë¦¬ë¥¼ ê¸°ì¤€ìœ¼ë¡œ êµ¬ì„±
  - ì¥ì : ê´€ë ¨ëœ ì½”ë“œë“¤ì´ ì‘ì§‘í•´ ìˆëŠ” ì¥ì ì´ ìˆì–´ ë‚˜ì¤‘ì— ë„ë©”ì¸ì„ ë¶„ë¦¬í•  ë•Œ ìœ ìš©í•˜ë‹¤. (í”„ë¡œì íŠ¸ê°€ í° ê²½ìš°ì— ì‚¬ìš©í•˜ë©´ ì¢‹ìŒ)
  - ëŒ€ì‹  ì „ì²´ì ì¸ êµ¬ì¡°ë¥¼ íŒŒì•…í•˜ëŠ”ë° ì¢€ ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤.

```groovy
â””â”€â”€ src
  â”œâ”€â”€ main
  â”‚   â”œâ”€â”€ java
  â”‚   â”‚   â””â”€â”€ com
  â”‚   â”‚       â””â”€â”€ azurealstn
  â”‚   â”‚           â””â”€â”€ alog
  â”‚   â”‚               â”œâ”€â”€ AlogApplication.java
  â”‚   â”‚               â”œâ”€â”€ domain
  â”‚   â”‚               â”‚   â”œâ”€â”€ comment
  â”‚   â”‚               â”‚   â”œâ”€â”€ email
  â”‚   â”‚               â”‚   â”œâ”€â”€ hashtag
  â”‚   â”‚               â”‚   â”œâ”€â”€ image
  â”‚   â”‚               â”‚   â”œâ”€â”€ like
  â”‚   â”‚               â”‚   â”œâ”€â”€ member
  â”‚   â”‚               â”‚   â”œâ”€â”€ posts
  â”‚   â”‚               â”‚   â””â”€â”€ tempsave
  â”‚   â”‚               â”œâ”€â”€ controller
  â”‚   â”‚               â”‚   â”œâ”€â”€ comment
  â”‚   â”‚               â”‚   â”œâ”€â”€ email
  â”‚   â”‚               â”‚   â”œâ”€â”€ hashtag
  â”‚   â”‚               â”‚   â”œâ”€â”€ image
  â”‚   â”‚               â”‚   â”œâ”€â”€ like
  â”‚   â”‚               â”‚   â”œâ”€â”€ member
  â”‚   â”‚               â”‚   â”œâ”€â”€ posts
  â”‚   â”‚               â”‚   â””â”€â”€ tempsave
  â”‚   â”‚               â”œâ”€â”€ dto
  â”‚   â”‚               â”‚   â”œâ”€â”€ auth
  â”‚   â”‚               â”‚   â”œâ”€â”€ comment
  â”‚   â”‚               â”‚   â”œâ”€â”€ email
  â”‚   â”‚               â”‚   â”œâ”€â”€ hashtag
  â”‚   â”‚               â”‚   â”œâ”€â”€ image
  â”‚   â”‚               â”‚   â”œâ”€â”€ like
  â”‚   â”‚               â”‚   â”œâ”€â”€ login
  â”‚   â”‚               â”‚   â”œâ”€â”€ member
  â”‚   â”‚               â”‚   â”œâ”€â”€ posts
  â”‚   â”‚               â”‚   â””â”€â”€ tempsave
  â”‚   â”‚               â”œâ”€â”€ repository
  â”‚   â”‚               â”‚   â”œâ”€â”€ comment
  â”‚   â”‚               â”‚   â”œâ”€â”€ email
  â”‚   â”‚               â”‚   â”œâ”€â”€ hashtag
  â”‚   â”‚               â”‚   â”œâ”€â”€ image
  â”‚   â”‚               â”‚   â”œâ”€â”€ like
  â”‚   â”‚               â”‚   â”œâ”€â”€ member
  â”‚   â”‚               â”‚   â”œâ”€â”€ posts
  â”‚   â”‚               â”‚   â””â”€â”€ tempsave
  â”‚   â”‚               â”œâ”€â”€ service
  â”‚   â”‚               â”‚   â”œâ”€â”€ comment
  â”‚   â”‚               â”‚   â”œâ”€â”€ email
  â”‚   â”‚               â”‚   â”œâ”€â”€ hashtag
  â”‚   â”‚               â”‚   â”œâ”€â”€ image
  â”‚   â”‚               â”‚   â”œâ”€â”€ like
  â”‚   â”‚               â”‚   â”œâ”€â”€ login
  â”‚   â”‚               â”‚   â”œâ”€â”€ member
  â”‚   â”‚               â”‚   â”œâ”€â”€ posts
  â”‚   â”‚               â”‚   â””â”€â”€ tempsave
  â”‚   â”‚               â”œâ”€â”€ infra
  â”‚   â”‚               â”‚   â”œâ”€â”€ convert
  â”‚   â”‚               â”‚   â”œâ”€â”€ exception
  â”‚   â”‚               â”‚   â”œâ”€â”€ utils
  â”‚   â”‚               â”œâ”€â”€ config
  â”‚   â”‚               â”‚   â”œâ”€â”€ auth
  â”‚   â””â”€â”€ resources
  â”‚       â”œâ”€â”€ application.yml
  â”‚       â”œâ”€â”€ application-mail.yml
  â”‚       â”œâ”€â”€ application-oauth.yml
  â”‚       â””â”€â”€ application-aws.yml
```

## ğŸ—» git í˜‘ì—…

í”„ë¡œì íŠ¸ë¥¼ í˜¼ìì„œ êµ¬í˜„í–ˆê¸° ë•Œë¬¸ì— git í˜‘ì—… ê²½í—˜ì´ ì—†ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ í˜¼ìì„œ ë¸Œëœì¹˜ë¥¼ ë”°ê³  ì•„ë˜ì™€ ê°™ì€ íŒ¨í„´ìœ¼ë¡œ ì†ŒìŠ¤ í˜•ìƒ ê´€ë¦¬ë¥¼ í–ˆìŠµë‹ˆë‹¤.

1. ë¸Œëœì¹˜ ìƒì„± -> ë¸Œëœì¹˜ ì´ë™
2. ì†ŒìŠ¤ ìˆ˜ì • -> `git add .` -> `git commit`
3. main ë¸Œëœì¹˜ ì´ë™ -> `git merge --no-ff --log ë¸Œëœì¹˜ëª…`
4. ë¸Œëœì¹˜ ì‚­ì œ -> ìƒˆ ë¸Œëœì¹˜ ìƒì„± (1ë²ˆìœ¼ë¡œ ì´ë™, ë°˜ë³µ...)

ì»¤ë°‹ ë©”ì‹œì§€ëŠ” `git commit message convention`ì„ ì°¸ê³ í•´ì„œ ì»¤ë°‹ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

## ğŸ† ë°°í¬ ì§„í–‰

1. `git clone` í˜¹ì€ `git pull`ì„ í†µí•´ ìƒˆ ë²„ì „ì˜ í”„ë¡œì íŠ¸ ë°›ëŠ”ë‹¤.
2. Gradleì´ë‚˜ Mavenì„ í†µí•´ í”„ë¡œì íŠ¸ í…ŒìŠ¤íŠ¸ì™€ ë¹Œë“œ
3. EC2 ì„œë²„ì—ì„œ í•´ë‹¹ í”„ë¡œì íŠ¸ ì‹¤í–‰ ë° ì¬ì‹¤í–‰

ìœ„ ê³¼ì •ì—ì„œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨í•´ì„œ ì†ŒìŠ¤ ìˆ˜ì •í•˜ê³  `git push`ë¥¼ í–ˆë‹¤ë©´ `git pull`ì„ ë°›ì•„ì„œ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤.

- gradlew ê¶Œí•œ : chmod +x ./gradlew

ìœ„ ê³¼ì •ì„ ìë™í™”í•˜ê¸° ìœ„í•´ `Shell Script`ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

```shell
ê²½ë¡œ: /home/ec2-user/app/project/deploy.sh
ì‹¤í–‰ìˆœì„œ:
1. git pull -> git ìµœì‹  ì—…ë°ì´íŠ¸
2. ./gradlew build -> gradle build ì§„í–‰
3. jar íŒŒì¼ ë³µì‚¬
5. kill -pid -> í˜„ì¬ êµ¬ë™ì¤‘ì´ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì£½ì´ê³  ìƒˆë¡œ ë°°í¬
6. nohup java -jar -Dspring.config.location=~ -Dspring.profiles.active=real alog-0.0.1-SNAPSHOT.jar
-> nohupì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ë¥¼ êº¼ë„ ê³„ì† ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •
-> -Dspring.config.location ì„¤ì •ìœ¼ë¡œ yml ê²½ë¡œ ì§€ì •
-> -Dspring.profiles.active ì„¤ì •ìœ¼ë¡œ ìš´ì˜(real) profile ì§€ì •
```

## ğŸ‘“ API ë¬¸ì„œ

í´ë¼ì´ì–¸íŠ¸ ì…ì¥ì—ì„œëŠ” ì–´ë–¤ APIê°€ ìˆëŠ”ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ë°±ì—”ë“œì—ì„œ APIë¥¼ ì˜ ì •ë¦¬í•´ì„œ ì „ë‹¬í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ë°±ì—”ë“œì—ì„œ ê°œë°œí•œ ì‹¤ì œ ì½”ë“œë¥¼ í† ëŒ€ë¡œ ìë™ìœ¼ë¡œ API ë¬¸ì„œí™”ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” íˆ´ë“¤ì´ ìˆìŠµë‹ˆë‹¤.

- Swagger
- Postman
- GitBook
- I/O Docs
- Spring REST Docs

### Spring REST Docsì˜ ì¥ì 

ìœ„ íˆ´ë“¤ ì¤‘ì— Spring REST Docsë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. ë°°í¬ëœ ìš´ì˜ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤. (ìš´ì˜ì½”ë“œì— ì˜í–¥ X)
2. ì½”ë“œê°€ ë³€ê²½ì´ ë˜ì–´ë„ API ë¬¸ì„œë„ ê°™ì´ ìµœì‹ í™” ë©ë‹ˆë‹¤.
  - Test Case ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì„œë¥¼ ìƒì„±
  - APIê°€ ê°œë°œë˜ë©´ Test Case ì‘ì„±ê³¼ í†µê³¼í•˜ëŠ” ê²ƒì´ êµ‰ì¥íˆ ì¤‘ìš”

![apiDocs](https://user-images.githubusercontent.com/55525868/194799370-bbbf6b5f-7980-4043-8664-6c6f2fa0a51c.PNG)

### asciidoctor ì‹¤í–‰

![asciidoctor](https://user-images.githubusercontent.com/55525868/194816059-8f7487d2-db03-4532-8d23-1334eea06b33.PNG)

1. asciidoctor ì‹¤í–‰

![build](https://user-images.githubusercontent.com/55525868/194810511-9e5d75ad-898f-45ce-863e-4554a1046624.PNG)

2. build ì‹¤í–‰

- asciidoctorëŠ” testë¥¼ ì‹¤í–‰ í›„ ì„±ê³µí•˜ë©´ build í´ë”ì— snippets, htmlì„ ìƒì„±
- gradle buildì‹œ bootJarê°€ ì‹¤í–‰ë˜ë©´ì„œ build í´ë”ì— ìˆë˜ htmlì„ /resources/static/docs ë¡œ ë³µì‚¬

## ğŸ§± ì–´ë ¤ì› ë˜ ì  & í•´ê²°

### 1. ê°•ì œ ë¡œê·¸ì¸ ì²˜ë¦¬

- ê¸°ë³¸ì ìœ¼ë¡œ Spring Securityë¥¼ ì´ìš©í•˜ë©´ ì¸ì¦/ì¸ê°€/Principal(ì ‘ê·¼ì£¼ì²´)/Credential(ë¹„ë°€ë²ˆí˜¸) ì´ ë„¤ ê°€ì§€ë¥¼ í™•ì¸í•˜ì—¬ ì‚¬ìš©ìê°€ ìš°ë¦¬ ì‚¬ì´íŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ì¤ë‹ˆë‹¤.
- í•˜ì§€ë§Œ ì´ í”„ë¡œì íŠ¸ëŠ” ë¡œê·¸ì¸ì´ë‚˜ íšŒì›ê°€ì…ì‹œì— **ì´ë©”ì¼ ì¸ì¦**ì„ í†µí•´ì„œ ì§„í–‰í•˜ê¸° ë•Œë¬¸ì— Credential(ë¹„ë°€ë²ˆí˜¸) ë¶€ë¶„ì´ í•„ìš”ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.
- ë”°ë¼ì„œ ì €ëŠ” ë¹„ë°€ë²ˆí˜¸ ì—†ì´ë„ ë¡œê·¸ì¸í¼ ì—†ì´ë„ ê°•ì œë¡œ ë¡œê·¸ì¸ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ê°œë°œí•˜ëŠ”ë° ì–´ë ¤ì›€ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

<details>
<summary><b>ê¸°ì¡´ ë¡œê·¸ì¸ ì½”ë“œ</b></summary>
<div markdown="1">

```java
@RequiredArgsConstructor
@Service
public class PrincipalDetailService implements UserDetailsService {

    private final UserRepository userRepository;

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        User principal =  userRepository.findByUsername(username).orElseThrow(() -> new UsernameNotFoundException("í•´ë‹¹ ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. " + username));
        return new PrincipalDetail(principal);
    }
}
```

</div>
</details>

- `UserDetailsService` ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ê³  `loadUserByUsername` ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ì—¬ `UserDetails`ë¥¼ ë°˜í™˜í•˜ëŠ” Principal ì‚¬ìš©ì ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ë©´ ì¸ì¦ì²˜ë¦¬ê°€ ì™„ë£Œê°€ ë©ë‹ˆë‹¤.
- í•˜ì§€ë§Œ ì´ëŠ” ê°•ì œ ë¡œê·¸ì¸ì—ì„œëŠ” ì²˜ë¦¬í•  ìˆ˜ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.

<details>
<summary><b>ê°•ì œ ë¡œê·¸ì¸ ì½”ë“œ</b></summary>
<div markdown="1">

```java
private void forceLoginAuth(Member member) {
    List<GrantedAuthority> roles = new ArrayList<>();
    roles.add(new SimpleGrantedAuthority(member.getRoleKey()));
    Authentication authentication = new UsernamePasswordAuthenticationToken(member.getEmail(), null, roles);
    SecurityContextHolder.getContext().setAuthentication(authentication);
    httpSession.setAttribute("member", new SessionMemberDto(member));
}
```

- ê°•ì œ ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•  ë•ŒëŠ” `UsernamePasswordAuthenticationToken` ê°ì²´ë¥¼ êµ¬í˜„í•´ì„œ `SecurityContextHolder` í´ë˜ìŠ¤ì— ë„˜ê²¨ì£¼ë©´ ë©ë‹ˆë‹¤.

</div>
</details>

### 2. í˜ì´ì§• ì²˜ë¦¬ (QueryDSL)

- Spring Data Jpaë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ í˜ì´ì§• ì²˜ë¦¬ì— ë§ì€ ê¸°ëŠ¥ì„ ì œê³µí•´ì£¼ëŠ” `Pageable` ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ì¸ `PageRequest` í´ë˜ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ `Pageable`ì„ ì‚¬ìš©í•˜ë©´ ì¢€ ë” ë³µì¡í•œ ê²€ìƒ‰ì´ë‚˜ ì •ë ¬ì´ ë“¤ì–´ê°€ëŠ” ê²½ìš° ê¸°ëŠ¥ì´ ë‹¤ì†Œ ë¶€ì¡±í•˜ê¸° ë•Œë¬¸ì— ì§ì ‘ í˜ì´ì§•ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- í˜ì´ì§• êµ¬í˜„ì€ QueryDSL ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

<details>
<summary><b>ê°œì„ ëœ ì½”ë“œ</b></summary>
<div markdown="1">

```java
@Override
public List<Posts> findAllBySearch(PostsSearchDto searchDto) {
    return jpaQueryFactory
      .selectFrom(posts)
      .limit(searchDto.getSize())
      .offset(searchDto.getOffset())
      .where(eqTitleOrEqContent(searchDto.getSearchValue(), searchDto.getSearchValue()),
            posts.secret.eq(false))
      .orderBy(posts.likes.desc(), posts.id.desc())
      .fetch();
}

private BooleanExpression eqTitleOrEqContent(String title, String content) {
    if (StringUtils.hasLength(title) || StringUtils.hasLength(content)) {
        return posts.title.contains(title).or(posts.content.contains(content));
    }
    return null;
}
```

- ìœ„ ì½”ë“œëŠ” ê²€ìƒ‰ í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì¿¼ë¦¬ë¬¸ì…ë‹ˆë‹¤.
- `offset`ê³¼ `limit`ìœ¼ë¡œ í˜ì´ì§• ì²˜ë¦¬ë¥¼ í•˜ì˜€ê³ , `orderBy`ë¥¼ ì´ìš©í•˜ì—¬ ì¢‹ì•„ìš”ìˆœ, ìµœì‹ ìˆœìœ¼ë¡œ ë‚˜ì˜¤ë„ë¡ ì •ë ¬ì„ í•˜ì˜€ìŠµë‹ˆë‹¤.
- ê·¸ë¦¬ê³  `BooleanExpression`ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰ì‹œ ë³µì¡í•œ ë™ì ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
- ë˜í•œ í˜ì´ì§•ì—ì„œ `totalRowCount`ë‚˜ `prevPage` ê°™ì€ ê³µí†µ ì»¬ëŸ¼ë“¤ì€ ë‹¤ë¥¸ë°ì„œë„ ì“°ì´ë¯€ë¡œ ê³µí†µ í´ë˜ìŠ¤ì¸ `BasePageDto` í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. (ì•„ë˜ ì½”ë“œ)

```java
@ToString
@Getter
public class PostsSearchDto {

  private static final int MAX_SIZE = 200;

  private Integer page; //í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸
  private Integer size; //í•œ í˜ì´ì§€ë‹¹ ë°ì´í„° ìˆ˜
  private BasePageDto basePageDto;
}

//Serviceë‹¨
int totalRowCount = postsRepository.findAllBySearchCount(searchDto);
BasePageDto basePageDto = new BasePageDto(searchDto.getPage(), searchDto.getSize(), totalRowCount);
searchDto.setBasePageDto(basePageDto);
```

</div>
</details>

### 3. ë°ì´í„° ê²€ì¦ & ì˜ˆì™¸ì²˜ë¦¬

- ë¸”ë¡œê·¸ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ë‹¤ë³´ë©´ ì œëª©ì„ ì…ë ¥ ì•ˆí–ˆë‹¤ë˜ì§€ ë‚´ìš©ì„ ì…ë ¥ì„ ì•ˆí–ˆë‹¤ë©´ ì‚¬ìš©ìì—ê²Œ ì¹œì ˆí•˜ê²Œ ì•Œë ¤ì¤„ í•„ìš”ì„±ì„ ëŠê¼ˆìŠµë‹ˆë‹¤.
- ì´ëŸ¬í•œ ë°ì´í„° ê²€ì¦ì€ `BindingResult` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ë§ˆë‹¤ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ ë§¤ë²ˆ ì»¨íŠ¸ë¡¤ëŸ¬ë§ˆë‹¤ ì´ëŸ¬í•œ ë°˜ë³µ ì½”ë“œë¥¼ ì ëŠ” ê²ƒì€ ë„ˆë¬´ë‚˜ ì¡°ì¡í•˜ê³  ë³µì¡í–ˆìŠµë‹ˆë‹¤.

<details>
<summary><b>ê¸°ì¡´ ì½”ë“œ</b></summary>
<div markdown="1">

```java
@PostMapping("/api/v1/posts")
public Map<String, String> posts(@Valid @RequestBody PostsCreateRequestDto requestDto, BindingResult result) {
    if (result.hasErrors()) {
        List<FieldError> fieldErrors = result.getFieldErrors();
        FieldError fieldError = fieldErrors.get(0);
        String fieldName = fieldError.getField();
        String defaultMessage = fieldError.getDefaultMessage();

        Map<String, String> error = new HashMap<>();
        error.put(fieldName, defaultMessage);
        return error;
    }
    return Map.of();
}
```

</div>
</details>

- ë°˜ë³µì ì¸ ì½”ë“œë¥¼ ì¤„ì´ê¸° ìœ„í•´ `@RestControllerAdvice`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ê²€ì¦ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ `@ExceptionHandler`ê°€ ë¶™ì€ ë©”ì„œë“œì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì „ì—­ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ê°œì„ í•˜ì˜€ìŠµë‹ˆë‹¤.

<details>
<summary><b>ê°œì„ ëœ ì½”ë“œ</b></summary>
<div markdown="1">

```java
@Slf4j
@RestControllerAdvice
public class ExceptionApiController {

  /**
   * ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ ì´ í´ë˜ìŠ¤ì—ì„œ ì •ì˜í•œ ì˜ˆì™¸ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì˜ˆì™¸ê°€ í„°ì§€ë©´ PostsNotFound ì˜ˆì™¸ê°€ í„°ì§„ë‹¤.
   * í•˜ì§€ë§Œ PostsNotFound ì˜ˆì™¸ëŠ” RuntimeExceptionì„ ìƒì†ë°›ì•˜ê¸° ë•Œë¬¸ì— ë¬´ì¡°ê±´ ì„œë²„ì—ëŸ¬(500)ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
   * ë”°ë¼ì„œ ë°œìƒí•œ ì—ëŸ¬ì— ëŒ€í•œ ì •í™•í•œ HTTP ìƒíƒœì½”ë“œë¥¼ ë°œìƒì‹œì¼œì¤˜ì•¼ í•œë‹¤.
   * @ResponseStatus ëŒ€ì‹ ì— ResponseEntity í´ë˜ìŠ¤ë¥¼ ì‘ë‹µë°›ëŠ”ë‹¤.
   */
  @ExceptionHandler(GlobalException.class)
  public ResponseEntity<ErrorResponseDto> globalException(GlobalException e) {
    int statusCode = e.getStatusCode();
    ErrorResponseDto errorResponseDto = ErrorResponseDto.builder()
            .code(String.valueOf(statusCode))
            .message(e.getMessage())
            .build();

    ResponseEntity<ErrorResponseDto> responseEntity = ResponseEntity.status(statusCode).body(errorResponseDto);

    return responseEntity;
  }
}
```

- `PostsNotFound`ë‚˜ `MemberNotFound` ê°™ì€ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ë§¤ë²ˆ `@ExceptionHandler` ë©”ì„œë“œë¥¼ ë§Œë“¤ê¸°ì—ëŠ” ì½”ë“œê°€ ë°˜ë³µë˜ê¸° ë•Œë¬¸ì— `GlobalException`ì´ë¼ëŠ” ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ê²Œ ë§Œë“¤ì–´ì„œ ë©”ì„œë“œ í•˜ë‚˜ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.
- `GlobalException` í´ë˜ìŠ¤ë¥¼ ì¶”ìƒí´ë˜ìŠ¤ë¡œ ë§Œë“  ì´ìœ ëŠ” ìƒíƒœì½”ë“œ(status code)ë¥¼ í•„ìˆ˜ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ì„œì…ë‹ˆë‹¤.
- status codeì™€ ì—ëŸ¬ Json ë°ì´í„°ë¥¼ ì„¸íŒ…í•´ì£¼ê¸° ìœ„í•´ `ResponseEntity`ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

</div>
</details>

## ğŸ’¥ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### @ModelAttributeê°€ ë°”ì¸ë”© ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ

ì²«ë²ˆì§¸. DTO í´ë˜ìŠ¤ì— `@NoArgsConstructor`ì™€ `@AllArgsConstructor` ë‘˜ ë‹¤ ìˆëŠ” ê²½ìš° `NoArgsConstructor`ë¥¼ í˜¸ì¶œí•˜ê³ , setterë¥¼ í˜¸ì¶œí•œ ë‹¤ìŒì— paramì„ í•„ë“œì— ê°ê° ì´ˆê¸°í™”ë¥¼ í•œë‹¤.

ë‘ë²ˆì§¸. í•˜ì§€ë§Œ `@AllArgsConstructor`ë§Œ ìˆëŠ” ê²½ìš° `@AllArgsConstructor`ë¥¼ í˜¸ì¶œí•˜ê³  paramì„ ê°ê° ì´ˆê¸°í™”í•œ ë’¤ì—ì•¼ setterë¥¼ í˜¸ì¶œí•˜ì—¬ ë‹¤ì‹œ param ì´ˆê¸°í™”ë¥¼ ë®ì–´ì”Œìš´ë‹¤.

ì—¬ê¸°ì„œ í•µì‹¬ì€ ì²«ë²ˆì§¸ëŠ” setterë¥¼ ë¨¼ì € í˜¸ì¶œí•˜ê¸° ë•Œë¬¸ì— `@setter`ê°€ ìˆì–´ì•¼ í•œë‹¤. ë”°ë¼ì„œ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ `@NoArgsConstructor`ë¥¼ ì œê±°í•˜ë©´ ëœë‹¤.

- https://steady-coding.tistory.com/489

###  @Emailì€ nullì„ ìœ íš¨í•˜ë‹¤ê³  íŒë‹¨

Spring Bootì˜ validation ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ `@Email`ì„ ì‚¬ìš©í•˜ë©´ ë¹ˆ ê°’(null)ì„ ì‚¬ìš©í•˜ë©´ ìœ íš¨ì„± ì²´í¬ì—ì„œ ê±¸ëŸ¬ì§€ëŠ”ì¤„ ì•Œì•˜ì§€ë§Œ `@Email`ì€ `null`ì„ í—ˆìš©í•œë‹¤.

- https://bellog.tistory.com/134

### Cannot construct instance of XXXDto - InvalidDefinitionException

DTO í´ë˜ìŠ¤ì— `@NoArgsConstructor`ë¥¼ ì¶”ê°€í•˜ë©´ í•´ê²° (ìƒì„±ìê°€ ì—†ì–´ì„œ ê·¸ëŸ° ê²ƒ ê°™ë‹¤.)

- https://yoo11052.tistory.com/158

### ì„¸ì…˜ì— ì €ì¥í•  ë•Œ Member í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ì´ìœ 

ì„¸ì…˜ì— ê°ì²´ë¥¼ ì €ì¥í•  ë•ŒëŠ” ì§ë ¬í™”ë¥¼ êµ¬í˜„í•´ì£¼ì–´ì•¼ í•˜ëŠ”ë° Member í´ë˜ìŠ¤ëŠ” ì—”í‹°í‹°ì´ê¸° ë•Œë¬¸ì— ë„ë©”ì¸ì˜ í•µì‹¬ì´ë‹¤. ê·¸ë˜ì„œ ë”°ë¡œ DTO í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ê·¸ DTOì— ì§ë ¬í™”ë¥¼ êµ¬í˜„í•´ì£¼ë©´ ëœë‹¤. 

### could not initialize proxy - no Session

JPAì—ì„œ 1ëŒ€N ë§¤í•‘ ê´€ê³„ì—ì„œ Lazy ë¡œë”©ì´ë©´ í•´ë‹¹ ê°ì²´ê°€ í•„ìš”ë¡œí•˜ë©´ ê·¸ ë•Œ ê°€ì ¸ì˜¨ë‹¤. ì´ ì—ëŸ¬ê°€ ë‚˜ëŠ” ì´ìœ ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ê´€ë¦¬ë˜ì§€ ì•ŠëŠ”ë° í•„ìš”í•œ ê°’ì„ ê°€ì ¸ì˜¤ë ¤ í•  ë•Œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©ëª»í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

ê·¸ë˜ì„œ ì „ëµì„ Eager ë¡œë”©ìœ¼ë¡œ ë³€ê²½í•˜ê±°ë‚˜(ë¹„ì¶”ì²œ), ì„œë¹„ìŠ¤ë‹¨ì— `@Transactional`ì„ ì¶”ê°€í•œë‹¤. 

- https://cantcoding.tistory.com/78

### Failed to convert String to LocalDateTime

`String`ì—ì„œ `LocalDateTime` íƒ€ì…ìœ¼ë¡œ ë³€í™˜ì´ ì˜ ì•ˆëœë‹¤ë©´ `@DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)`ë¥¼ ì‚¬ìš©í•´ë³´ì.

- https://stackoverflow.com/questions/40274353/how-to-use-localdatetime-requestparam-in-spring-i-get-failed-to-convert-string

### MockMvcì™€ SpringBootTest ê°™ì´ ì‚¬ìš©í•˜ê¸°

- https://backtony.github.io/spring/2021-07-14-spring-test-1/

### REST Docs configuration not found

`REST Docs configuration not found`ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë‚œë‹¤ë©´ ì•„ë˜ ì‚¬ì´íŠ¸ë¥¼ ì°¸ê³ 

- [https://sejoung.github.io](https://sejoung.github.io/2021/08/2021-08-11-spring_restdocs_REST_Docs_configuration_not_found/#junit-mockmvc-%ED%95%9C%EA%B8%80%EA%B9%A8%EC%A7%90-%EC%B2%98%EB%A6%AC%EC%8B%9C-restdocs-%EC%97%90%EB%9F%AC)

### cannot deserialize from Object value (no delegate- or property-based Creator)

`@Transactional` ë¶™ì—¬ì„œ í•´ê²°

- [https://velog.io/@sileeee](https://velog.io/@sileeee/JUnit%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%8B%A4%ED%96%89%EC%A4%91-%EB%A7%88%EC%A3%BC%EC%B9%9C-%EC%98%A4%EB%A5%98)

### No serializer found for class org.hibernate.proxy.pojo.bytebuddy.ByteBuddyInterceptor

`@JsonIgnore`ë¡œ í•´ê²°

- https://csy7792.tistory.com/26

### Spring Security ê°•ì œ ë¡œê·¸ì¸

Spring Securityì—ì„œ ë¡œê·¸ì¸í•  ë•Œ ë¡œê·¸ì¸ í¼ì„ ê±°ì¹˜ì§€ ì•Šê³  ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ë¡œê·¸ì¸í•˜ëŠ” ë°©ë²•ì´ë‹¤.

- http://yoonbumtae.com/?p=1841
  
### ajax parseerror

ìœ„ì™€ ê°™ì€ ajax ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´ `dataType`ì„ í™•ì¸í•˜ì.

### No key, method or field with name

mustacheì—ì„œ ì‚¬ìš©í•˜ë ¤ëŠ” DTO í´ë˜ìŠ¤ì˜ í•„ë“œ ê°’ì´ `null`ì„ ê²½ìš°ì— ë‚˜ëŠ” ì—ëŸ¬ì´ë‹¤. ì´ëŸ° ì—ëŸ¬ê°€ ë‚˜ë©´ ë¶„ê¸°ë¬¸ ì²˜ë¦¬ë¡œ `null`ì¼ ê²½ìš°ì™€ ì•„ë‹ ê²½ìš°ë¥¼ ë‚˜ëˆ„ì–´ì„œ ì¶œë ¥í•˜ë©´ ëœë‹¤.

- `null`ì¼ ê²½ìš°: `{{^DTO}}NO{{/DTO}}`
- [https://velog.io/@wijoonwu](https://velog.io/@wijoonwu/Spring-Boot-No-key-method-or-field-with-name-%EC%98%A4%EB%A5%98-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95)

### fetchCount() deprecated

'ì „ì²´ ë¡œìš° ìˆ˜'ë¥¼ êµ¬í•  ë•Œ `fetchCount()`ë¥¼ ì‚¬ìš©í–ˆëŠ”ë° `deprecated` ë˜ì–´ì„œ ë” ì´ìƒ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤. ì´ëŸ´ ë•ŒëŠ” `fetch().size()`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

### mustacheì˜ ë¶ˆí¸í•œ ì 

mustacheì˜ ì¥ì ì€ ì‰½ê³  ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í…œí”Œë¦¿ì´ë‹¤. í•˜ì§€ë§Œ ë³µì¡í•œ ì—°ì‚°ì´ë‚˜ ë¡œì§ì´ ë“¤ì–´ê°ˆ ë•ŒëŠ” ì í•©í•˜ì§€ ì•Šë‹¤.

```java
List<PostsResponseDto> postsList = postsService.findAll(searchDto);

//==í˜ì´ì§• ì²˜ë¦¬ start==//
List<Integer> pagination = new ArrayList<>();
int startPage = searchDto.getBasePageDto().getStartPage();
int endPage = searchDto.getBasePageDto().getEndPage();
for (int i = startPage; i <= endPage; i++) {
pagination.add(i);
}

boolean hasDoublePrevPage = (searchDto.getPage() / 10) > 0;
boolean hasDoubleNextPage = (searchDto.getPage() / 10) < (searchDto.getBasePageDto().getTotalPageCount() / 10);
int doublePrevPage = startPage - 10;
int doubleNextPage = startPage + 10;

//==í˜ì´ì§• ì²˜ë¦¬ end==//

model.addAttribute("postsList", postsList);
model.addAttribute("movePrevPage", searchDto.getPage() - 1);
model.addAttribute("moveNextPage", searchDto.getPage() + 1);
model.addAttribute("pagination", pagination);
model.addAttribute("hasDoubleNextPage", hasDoubleNextPage);
model.addAttribute("doubleNextPage", doubleNextPage);
model.addAttribute("hasDoublePrevPage", hasDoublePrevPage);
model.addAttribute("doublePrevPage", doublePrevPage);
```

ì˜ˆë¥¼ ë“¤ì–´, í˜ì´ì§•ì„ êµ¬í˜„í•˜ëŠ”ë° ë³´í†µ Viewë‹¨ì—ì„œ ë°˜ë³µë¬¸ ì²˜ë¦¬ë¥¼ í•˜ê±°ë‚˜ ì—°ì‚°ì„ ì§ì ‘ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ”ë° mustacheëŠ” ê·¸ê²Œ ì•ˆë˜ì„œ javaë‹¨ì—ì„œ ë¯¸ë¦¬ êµ¬í•´ì„œ ëª¨ë¸ë¡œ ê°’ì„ ì¼ì¼ì´ ë„˜ê²¨ì•¼ í•œë‹¤. (ì‚¬ì‹¤ ê°„ë‹¨í•œ ê²½ìš°ì— ì‚¬ìš©í•œë‹¤ê³  í–ˆëŠ”ë° ì´ì •ë„ë„ ë¶ˆí¸í•˜ë©´ ê·¸ëƒ¥ ì˜ ì‚¬ìš©ì„ ì•ˆí•  ê²ƒ ê°™ë‹¤.)

### local class incompatible

ìë°”ì—ì„œëŠ” `serializable` ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì‰½ê²Œ 'ì§ë ¬í™”', 'ì—­ì§ë ¬í™”' í•  ìˆ˜ ìˆëŠ”ë° ì£¼ì˜í•´ì•¼ í• ê²Œ ìˆë‹¤.

Serializable ì¸í„°í˜ì´ìŠ¤ë¥¼ `implements`í•œ í´ë˜ìŠ¤ì— ì•„ë˜ì™€ ê°™ì€ ë³€ìˆ˜ ê°’ì´ ì§€ì •ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ JVMì´ í´ë˜ìŠ¤ êµ¬ì¡° ì •ë³´ë¥¼ í† ëŒ€ë¡œ í•´ì‹±ê°’ì„ ë§Œë“¤ì–´ ë‚¸ë‹¤. (ë”°ë¼ì„œ ì‚¬ìš©í•˜ëŠ” JVMì— ë”°ë¼ ê°’ì´ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.)

```java
private static final long serialVersionUID = ?L
```

ê·¸ë¦¬ê³  ì§ë ¬í™” -ì—­ì§ë ¬í™” ì‹œì— ì´ ê°’ì„ í‚¤ ê°’ìœ¼ë¡œ ì‚¬ìš©í•´ì„œ ê°ì²´ì˜ í˜¸í™˜ì„ ë”°ì§„ë‹¤. ì¦‰, ì´ ê°’ì´ ê°™ì•„ì•¼ ë°ì´í„°ê°€ ë‹¤ì‹œ ì—­ì§ë ¬í™”ë˜ëŠ” ê²ƒì´ë‹¤.

`local class incompatible` ì´ ì—ëŸ¬ëŠ” `serialVersionUID`ì˜ ê°’ì´ ë§¤ì¹­ì´ ë˜ì§€ ì•Šì•„ì„œ ìƒê¸°ëŠ” ì—ëŸ¬ì´ë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ìœ„ ì½”ë“œì²˜ëŸ¼ `static`ìœ¼ë¡œ `serialVersionUID` ì˜ ê°’ì„ ì§€ì •í•´ì£¼ë©´ ì„œë¡œ ê°™ì€ ê°’ì„ ì‚¬ìš©í•˜ê²Œ ë˜ì–´ ë§¤ì¹­ì´ ë˜ì§€ ì•Šì€ ì¼ì€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

- https://stackoverflow.com/questions/10378855/java-io-invalidclassexception-local-class-incompatible
- https://hevton.tistory.com/164

### Cannot call sendError() after the response has been committed

`JSON` íƒ€ì… ë³€í™˜ ê³¼ì • ì¤‘ ì¼ì–´ë‚œ ì—ëŸ¬.  
ì›ì¸ì€ JPAì—ì„œ í…Œì´ë¸”ê³¼ í…Œì´ë¸”ê°„ì˜ ì—°ê´€ ê´€ê³„(ì–‘ë°©í–¥)ì— ìˆìœ¼ë©° ì´ë¥¼ **ë¬´í•œ ìˆœí™˜ ì°¸ì¡°**ë¼ í•œë‹¤.

í•´ê²°ë²•ì€ `@JsonIgnore` ë¥¼ ì‚¬ìš©í•œë‹¤. - í•˜ì§€ë§Œ ì´ê²Œ ì •ë§ í™•ì‹¤í•œ ë°©ë²•ì¸ì§€ëŠ” ì˜ë¬¸ì´ë‹¤..

- https://to-moneyking.tistory.com/m/67

### No validator could be found for constraint 'javax.validation.constraints.NotBlank'

`@NotEmpty`, `@NotBlank` ëŠ” String íƒ€ì…ì— ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤. ë”°ë¼ì„œ `@NotNull` ì„ ì‚¬ìš©í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

- https://www.inflearn.com/questions/16953

### Ambiguous handler methods mapped for

ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì¤‘ë³µëœ URLì´ ìˆì–´ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬

### mustache í•œê¸€ ê¹¨ì§ ì´ìŠˆ

- Spring Boot 2.7.0ì—ì„œ ìœ„ ì´ìŠˆ ë°œìƒ
- 2.6.xëŒ€ë¡œ ë‹¤ìš´ ê·¸ë ˆì´ë“œí•˜ê±°ë‚˜ application.propertiesì— `server.servlet.encoding.force-response: true` ì¶”ê°€
- https://www.inflearn.com/questions/545116

### Table "SPRING_SESSION" not found; SQL statement ì—ëŸ¬

`application.yml`ì— ì•„ë˜ ë‘ ì¤„ ì¶”ê°€

```groovy
spring.session.store-type=jdbc
spring.session.jdbc.initialize-schema=always
```

### ì„¸ì…˜ ì €ì¥ì†Œë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©í•˜ê¸°

ë¡œê·¸ì¸í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ì„¸ì…˜ì€ ë‚´ì¥ í†°ìº£ì˜ ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ì‹¤í–‰í•˜ë©´ ë¡œê·¸ì¸ì´ í’€ë¦½ë‹ˆë‹¤. ë”°ë¼ì„œ ì„¤ì •ì´ ê°„ë‹¨í•œ MySQLê³¼ ê°™ì€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„¸ì…˜ ì €ì¥ì†Œë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

### urlTemplate not found. If you are using MockMvc did you use RestDocumentationRequestBuilders to build the request?

`MockMvcRequestBuilders`ê°€ ì•„ë‹Œ `RestDocumentationRequestBuilders`ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

## google ì†Œì…œë¡œê·¸ì¸ì‹œ í”„ë¡œí•„ ì‚¬ì§„ 403 ì—ëŸ¬

ì´ë¯¸ì§€ ì†ì„±ì— `referrerpolicy="no-referrer"`ë¥¼ ì¶”ê°€í•œë‹¤.

## ğŸ™ ì•„ì‰¬ìš´ ì 

### 1. Reactë‚˜ Vueë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•œ ì 

Reactë‚˜ Vue ëŒ€ì‹  SSRì¸ mustache templateì„ ì‚¬ìš©í–ˆëŠ”ë° ë¶ˆí¸í•œ ì ì´ í•œ ê°€ì§€ ìˆì—ˆìŠµë‹ˆë‹¤.  
í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¡œì§ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.

ê·¸ë‚˜ë§ˆ Thymeleafì˜ ê²½ìš° ë‹¤ì–‘í•œ ìœ í‹¸ì„± ë©”ì„œë“œë¥¼ ì œê³µí•´ì„œ ê´œì°®ì•˜ì§€ë§Œ MustacheëŠ” ê·¸ëŸ° ê²ƒì´ ì—†ì–´ì„œ ë¡œì§ì„ Controllerë‹¨ì—ì„œ ì²˜ë¦¬í•˜ì—¬ ê·¸ ì²˜ë¦¬ëœ ê²°ê³¼ê°’ì„ Modelì— ë„˜ê²¨ì„œ ì‚¬ìš©í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‹¤ ë³´ë‹ˆ Controllerë‹¨ì— Modelì— ë„˜ê¸°ëŠ” ë¶€ë¶„ì´ ë§ì•„ì¡ŒìŠµë‹ˆë‹¤.

### 2. ë‚˜ë§Œì˜ ì•„ì´ë””ì–´ë¡œ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì§€ ëª»í•œ ì 

ì´ë²ˆ í”„ë¡œì íŠ¸ì˜ ëª©ì ì€ ì‹¤ì œë¡œ ìš´ì˜í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤ë¥¼ ë˜‘ê°™ì´ ë§Œë“¤ì–´ë³´ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. ê·¸ ë™ì•ˆì€ ê°„ë‹¨í•˜ê²Œ CRUD ë™ì‘ë§Œ êµ¬í˜„í–ˆë‹¤ë©´ ìì£¼ ë°©ë¬¸í•˜ëŠ” ì›¹ì„œë¹„ìŠ¤ë¥¼ ë˜‘ê°™ì´ ë§Œë“¤ì–´ë³´ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ í”„ë¡ íŠ¸ìª½ì€ ê°œë°œì ë„êµ¬ë¥¼ í†µí•´ ê±°ì˜(ì™„ì „) ë™ì¼í•˜ê²Œ êµ¬í˜„í•˜ì˜€ê³ , ì„œë²„ìª½ë„ ì•„ì‰¬ìš´ ì ì´ ìºì‹œë‚˜ ê²€ìƒ‰ì—”ì§„(Elastic Search ë“±), ì¸í”„ë¼ ë“±ë“± ì‹ ê²½ì“°ì§€ ëª»í•œ ë¶€ë¶„ë“¤ì´ êµ‰ì¥íˆ ë§ì•˜ìŠµë‹ˆë‹¤.

ê·¸ë˜ì„œ ë‹¤ìŒ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ëŠ” ë­”ê°€ ì‚¬ëŒë“¤ì—ê²Œ ë„ì›€ì´ ë ë§Œí•œ ì›¹ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ê³  ì‹¶ì–´ì„œ ê³µê³µë°ì´í„° APIë¥¼ ì´ìš©í•˜ì—¬ ë§Œë“¤ ì˜ˆì •ì´ê³ , ì´ì „ í”„ë¡œì íŠ¸ì—ì„œ ì‹ ê²½ì“°ì§€ ëª»í–ˆë˜ ë¶€ë¶„ë“¤ë„ ë‹¤ìŒ í”„ë¡œì íŠ¸ì— ë…¹ì—¬ë‚¼ ì˜ˆì •ì…ë‹ˆë‹¤.
